<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Wacky Tales Input</title>
    <link rel="stylesheet" href="../../public/css/story.css">
    <script>
        function generateFields() {
            const story = "On a [adjective] evening in [place], [name] was feeling [adjective] about their first date with [name2]. They decided to meet at a [noun], known for its [adjective] ambiance and [noun] dishes. As they walked in, [name2] greeted them with a [adjective] smile. They both ordered [food] and started [verb ending in -ing] about their interests. The conversation flowed [adverb], and they discovered a shared love for [plural noun]. After dinner, they decided to take a walk in the [adjective] park nearby. The sky was [color], and the air smelled of [scent]. It was a [adjective] ending to a [adjective] night. They both felt [emotion] and knew they would see each other again soon.";
            const parts = story.match(/\[(adjective|place|name|name2|noun|food|verb ending in -ing|adverb|plural noun|color|scent|emotion)\]/g);
            const counts = { adjective: 0, place: 0, name: 0, name2: 0, noun: 0, food: 0, 'verb ending in -ing': 0, adverb: 0, 'plural noun': 0, color: 0, scent: 0, emotion: 0 };

            parts.forEach(part => {
                counts[part.slice(1, -1)]++;
            });

            const fieldContainer = document.getElementById('fields');
            Object.keys(counts).forEach(part => {
                for (let i = 0; i < counts[part]; i++) {
                    const div = document.createElement('div');
                    div.innerHTML = `<input type='text' name='${part}' placeholder='Enter ${part} #${i + 1}' />`;
                    fieldContainer.appendChild(div);
                }
            });
        }

        function handleSubmit(event) {
            event.preventDefault();
            const inputs = document.querySelectorAll('input[type="text"]');
            const words = Array.from(inputs).reduce((acc, input) => {
                if (!acc[input.name]) acc[input.name] = [];
                acc[input.name].push(input.value);
                return acc;
            }, {});
            localStorage.setItem('words', JSON.stringify(words));
            window.location.href = 'date-story.html';
        }
    </script>
</head>
<body onload="generateFields()">
    <header>
        <img src="../../assets/graphics/Clown Pointing.png" alt="Clown Image">
    </header>
    <div class="content">
        <h1>First Date Tale</h1>
        <form onsubmit="handleSubmit(event)">
            <div id="fields"></div>
            <div class="buttons">
                <button type="submit">Done</button>
            </div>
        </form>
    </div>
</body>
</html>
